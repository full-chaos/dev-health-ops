
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Developer health and operations analytics platform">
      
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.39">
    
    
      
        <title>Canonical Metrics & Data Mapping - dev-health-ops</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8c3ca2c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#canonical-metrics-data-mapping" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="dev-health-ops" class="md-header__button md-logo" aria-label="dev-health-ops" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            dev-health-ops
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Canonical Metrics &amp; Data Mapping
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/chrisgeo/dev-health-ops" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    dev-health-ops
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="dev-health-ops" class="md-nav__button md-logo" aria-label="dev-health-ops" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    dev-health-ops
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/chrisgeo/dev-health-ops" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    dev-health-ops
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Connectors
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Connectors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CONNECTOR_USAGE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PRIVATE_REPO_TESTING/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Private Repos
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Metrics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Metrics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../metrics-inventory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inventory
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../grafana/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Grafana
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../task_trackers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task Trackers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project Plan
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#metric-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Metric Registry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metric Registry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#person-level-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Person-Level Metrics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#view-api-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      View -&gt; API Mapping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="View -> API Mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apiv1explain" class="md-nav__link">
    <span class="md-ellipsis">
      /api/v1/explain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apiv1home" class="md-nav__link">
    <span class="md-ellipsis">
      /api/v1/home
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apiv1peopleperson_idmetric" class="md-nav__link">
    <span class="md-ellipsis">
      /api/v1/people/{person_id}/metric
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filters-scopes" class="md-nav__link">
    <span class="md-ellipsis">
      Filters &amp; Scopes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Filters & Scopes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time-window" class="md-nav__link">
    <span class="md-ellipsis">
      Time Window
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scope-scope_type" class="md-nav__link">
    <span class="md-ellipsis">
      Scope (scope_type)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#database-schema-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Database Schema Reference
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="canonical-metrics-data-mapping">Canonical Metrics &amp; Data Mapping<a class="headerlink" href="#canonical-metrics-data-mapping" title="Permanent link">&para;</a></h1>
<p>This document provides the authoritative mapping between API views, metric keys, and the underlying database schema. It is intended to guide the implementation of the Explain endpoint and other analytical features.</p>
<h2 id="metric-registry">Metric Registry<a class="headerlink" href="#metric-registry" title="Permanent link">&para;</a></h2>
<p>The following table defines the canonical metrics exposed via the API, their database source, and interpretation.</p>
<table>
<thead>
<tr>
<th>Metric Key</th>
<th>Label</th>
<th>Unit</th>
<th>Table</th>
<th>Column</th>
<th>Aggregation</th>
<th>Scope</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cycle_time</code></td>
<td>Cycle Time</td>
<td>days</td>
<td><code>work_item_metrics_daily</code></td>
<td><code>cycle_time_p50_hours</code></td>
<td>Avg (converted to days)</td>
<td>Team</td>
<td>Time from work start to completion. Lower is better.</td>
</tr>
<tr>
<td><code>review_latency</code></td>
<td>Review Latency</td>
<td>hours</td>
<td><code>repo_metrics_daily</code></td>
<td><code>pr_first_review_p50_hours</code></td>
<td>Avg</td>
<td>Repo</td>
<td>Time from PR creation to first review. Lower is better.</td>
</tr>
<tr>
<td><code>throughput</code></td>
<td>Throughput</td>
<td>items</td>
<td><code>work_item_metrics_daily</code></td>
<td><code>items_completed</code></td>
<td>Sum</td>
<td>Team</td>
<td>Count of completed work items. Higher is better.</td>
</tr>
<tr>
<td><code>deploy_freq</code></td>
<td>Deploy Frequency</td>
<td>deploys</td>
<td><code>deploy_metrics_daily</code></td>
<td><code>deployments_count</code></td>
<td>Sum</td>
<td>Repo</td>
<td>Number of deployments to production. Higher is better.</td>
</tr>
<tr>
<td><code>churn</code></td>
<td>Code Churn</td>
<td>loc</td>
<td><code>repo_metrics_daily</code></td>
<td><code>total_loc_touched</code></td>
<td>Sum</td>
<td>Repo</td>
<td>Total lines of code modified. High churn may indicate instability or rework.</td>
</tr>
<tr>
<td><code>wip_saturation</code></td>
<td>WIP Saturation</td>
<td>%</td>
<td><code>work_item_metrics_daily</code></td>
<td><code>wip_congestion_ratio</code></td>
<td>Avg</td>
<td>Team</td>
<td>Ratio of active items to developer capacity. Lower is better.</td>
</tr>
<tr>
<td><code>blocked_work</code></td>
<td>Blocked Work</td>
<td>hours</td>
<td><code>work_item_state_durations_daily</code></td>
<td><code>duration_hours</code></td>
<td>Sum</td>
<td>Team</td>
<td>Total time items spent in a blocked state. Lower is better.</td>
</tr>
<tr>
<td><code>change_failure_rate</code></td>
<td>Change Failure Rate</td>
<td>%</td>
<td><code>repo_metrics_daily</code></td>
<td><code>change_failure_rate</code></td>
<td>Avg</td>
<td>Repo</td>
<td>Percentage of deployments causing failure. Lower is better.</td>
</tr>
<tr>
<td><code>rework_ratio</code></td>
<td>Rework Ratio</td>
<td>%</td>
<td><code>repo_metrics_daily</code></td>
<td><code>rework_churn_ratio_30d</code></td>
<td>Avg</td>
<td>Repo</td>
<td>Ratio of churn in recently modified code. Lower is better.</td>
</tr>
<tr>
<td><code>ci_success</code></td>
<td>CI Success Rate</td>
<td>%</td>
<td><code>cicd_metrics_daily</code></td>
<td><code>success_rate</code></td>
<td>Avg</td>
<td>Repo</td>
<td>Percentage of successful CI pipeline runs. Higher is better.</td>
</tr>
</tbody>
</table>
<h3 id="person-level-metrics">Person-Level Metrics<a class="headerlink" href="#person-level-metrics" title="Permanent link">&para;</a></h3>
<p>Person-level metrics use <code>identity_id</code> or <code>user_identity</code> to filter and group data.</p>
<table>
<thead>
<tr>
<th>Metric Key</th>
<th>Label</th>
<th>Unit</th>
<th>Table</th>
<th>Column</th>
<th>Aggregation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cycle_time</code></td>
<td>Cycle Time</td>
<td>days</td>
<td><code>work_item_user_metrics_daily</code></td>
<td><code>cycle_time_p50_hours</code></td>
<td>Avg</td>
<td>Individual cycle time.</td>
</tr>
<tr>
<td><code>review_latency</code></td>
<td>Review Latency</td>
<td>hours</td>
<td><code>user_metrics_daily</code></td>
<td><code>pr_first_review_p50_hours</code></td>
<td>Avg</td>
<td>Time to review PRs assigned to this user.</td>
</tr>
<tr>
<td><code>throughput</code></td>
<td>Throughput</td>
<td>items</td>
<td><code>work_item_user_metrics_daily</code></td>
<td><code>items_completed</code></td>
<td>Sum</td>
<td>Items completed by the user.</td>
</tr>
<tr>
<td><code>churn</code></td>
<td>Code Churn</td>
<td>loc</td>
<td><code>user_metrics_daily</code></td>
<td><code>loc_touched</code></td>
<td>Sum</td>
<td>LOC touched by the user.</td>
</tr>
<tr>
<td><code>wip_overlap</code></td>
<td>WIP Overlap</td>
<td>items</td>
<td><code>work_item_user_metrics_daily</code></td>
<td><code>wip_count_end_of_day</code></td>
<td>Avg</td>
<td>Average concurrent items in progress.</td>
</tr>
<tr>
<td><code>blocked_work</code></td>
<td>Blocked Work</td>
<td>items</td>
<td><code>work_item_cycle_times</code></td>
<td><code>status='blocked'</code></td>
<td>Sum</td>
<td>Count of items blocked while assigned to user.</td>
</tr>
</tbody>
</table>
<h2 id="view-api-mapping">View -&gt; API Mapping<a class="headerlink" href="#view-api-mapping" title="Permanent link">&para;</a></h2>
<p>Data is exposed through specific API endpoints that consume these metrics.</p>
<h3 id="apiv1explain"><code>/api/v1/explain</code><a class="headerlink" href="#apiv1explain" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Provides detailed breakdown of a specific metric (drivers, contributors, drill-down).</li>
<li><strong>Parameters</strong>: <code>metric</code> (key from registry), <code>scope_type</code>, <code>scope_id</code>, <code>range_days</code>, <code>compare_days</code>.</li>
<li><strong>Response</strong>: Current value, delta %, top drivers (teams/repos contributing), and individual contributors (PRs/Issues).</li>
</ul>
<h3 id="apiv1home"><code>/api/v1/home</code><a class="headerlink" href="#apiv1home" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Executive dashboard with high-level health signals.</li>
<li><strong>Metrics Used</strong>: All metrics in the registry are candidates for "Insight Cards" or "Sparklines".</li>
<li><strong>Logic</strong>: Computes deltas for all metrics and highlights the "Constraint of the Week" (metric with worst regression).</li>
</ul>
<h3 id="apiv1peopleperson_idmetric"><code>/api/v1/people/{person_id}/metric</code><a class="headerlink" href="#apiv1peopleperson_idmetric" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose</strong>: Detailed view for a single person's metric.</li>
<li><strong>Parameters</strong>: <code>person_id</code>, <code>metric</code>.</li>
<li><strong>Response</strong>: Timeseries, breakdown by dimension (repo, work_type, stage).</li>
</ul>
<h2 id="filters-scopes">Filters &amp; Scopes<a class="headerlink" href="#filters-scopes" title="Permanent link">&para;</a></h2>
<p>All metrics support standard filtering patterns.</p>
<h3 id="time-window">Time Window<a class="headerlink" href="#time-window" title="Permanent link">&para;</a></h3>
<ul>
<li><code>start_day</code>, <code>end_day</code>: Explicit date range (inclusive).</li>
<li><code>range_days</code>: Lookback period from today (e.g., last 14 days).</li>
<li><code>compare_days</code>: Comparison period duration (usually matches <code>range_days</code>).</li>
</ul>
<h3 id="scope-scope_type">Scope (<code>scope_type</code>)<a class="headerlink" href="#scope-scope_type" title="Permanent link">&para;</a></h3>
<ul>
<li><strong><code>org</code></strong>: Aggregates data across the entire organization.</li>
<li><strong><code>team</code></strong>: Filters by <code>team_id</code>.</li>
<li>Maps to <code>team_id</code> column in <code>work_item_*</code> tables.</li>
<li>Requires joining <code>repos</code> on <code>owner_team_id</code> for repo-scoped metrics (e.g., <code>churn</code>).</li>
<li><strong><code>repo</code></strong>: Filters by <code>repo_id</code>.</li>
<li>Maps to <code>repo_id</code> column in <code>repo_*</code> tables.</li>
<li>For team-scoped metrics, this filter may not apply directly unless the team is mapped to the repo.</li>
</ul>
<h2 id="database-schema-reference">Database Schema Reference<a class="headerlink" href="#database-schema-reference" title="Permanent link">&para;</a></h2>
<p>The metrics are derived from the following core ClickHouse tables:</p>
<ul>
<li><strong><code>work_item_metrics_daily</code></strong>: Aggregated daily stats for work items (Jira/GitLab Issues).</li>
<li><strong><code>repo_metrics_daily</code></strong>: Aggregated daily stats for git repositories (Commits, PRs).</li>
<li><strong><code>deploy_metrics_daily</code></strong>: Deployment events and frequencies.</li>
<li><strong><code>work_item_state_durations_daily</code></strong>: Time spent in each workflow state (Active, Blocked, etc.).</li>
<li><strong><code>user_metrics_daily</code></strong>: Developer activity stats (Commits, PR reviews).</li>
<li><strong><code>work_item_user_metrics_daily</code></strong>: Developer delivery stats (Assigned items).</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.sections", "navigation.tracking", "search.highlight", "search.suggest"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.525ec568.min.js"></script>
      
    
  </body>
</html>